<!doctype html>

<title>Data Screen</title>
<link rel="stylesheet" href="./stylesheets/base.css">
<link href="https://assets.digital.cabinet-office.gov.uk/static/fonts-607c54f71c7c1f98257595cedaa13a34.css" media="all" rel="stylesheet" type="text/css">

<div class="top-bar">
  <div class="inner">
    <img src="https://www.gov.uk/assets/static/govuk-logotype-crown-0cdbde943be3a6518a5d7c00b607d134f4d5e3d0e8c68a1bfa2dc81f1f3edc4e.png" width="35" height="31" alt=""> GOV.UK
  </div>
</div>
<div class="small-box traffic">
  <div id="traffic" class="count">
    <div class="box-inner">
      <h1 id="traffic-count"></h1>
      <p>People currently on GOV.UK</p>
    </div>
  </div>
  <div class="graph box-in">
    <canvas id="traffic-count-graph" width="200" height="27"></canvas>
    <!-- <div id="traffic-count-graph" class="box-inner">
    </div> -->
  </div>
</div>

<div class="box searches"><div class="box-inner">
  <h1>Live searches on GOV.UK:</h1>
  <ul id="search"></ul>
</div></div>

<div class="box popular content"><div class="box-inner">
  <h1>Trending content from last 7 days traffic on GOV.UK:</h1>
  <ul id="content"></ul>
</div></div>

<div class="box recent content"><div class="box-inner">
  <h1>Recent content from departments:</h1>
  <ul id="inside-gov"></ul>
</div></div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="javascripts/vendor/mustache.js"></script>
<script src="javascripts/vendor/pretty.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

<script src="javascripts/template.js"></script>
<script src="javascripts/sparkline.js"></script>
<script src="javascripts/search.js"></script>
<script src="javascripts/traffic.js"></script>
<script src="javascripts/content.js"></script>
<script src="javascripts/inside-gov.js"></script>

<script src="javascripts/manager.js"></script>
<script>
  if(typeof window.matrix === 'undefined'){ window.matrix = {}; }

  matrix.settings = {
    authServer: '/token',
    profileId: '67465768'
  };

  $(function(){
   matrix.manager.init();

    const labels = ["4pm","5pm","6pm","7pm","8pm","9pm","10pm","11pm","12am","1am", "2am","3am", "4am","5am", "6am","7am", "8am", "9am","10am","11am","12pm", "1pm", "2pm", "3pm"]
    const data = {
      labels: labels,
      datasets: [{
        label: 'Active Users',
        data: [65, 59, 80, 81, 56, 55, 30, 59, 80, 81, 56, 55, 40, 59, 80, 81, 56, 55, 40, 59, 80, 81, 56, 55],
        backgroundColor: 'rgba(255, 255, 255)'
      }]
    };

    var myChart = new Chart("traffic-count-graph", {
      type: "line",
      data: data,
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        },
        plugins: {
          legend: {
            title: {
              display: false
            }
          }
        } 
      },
    });   
  });
</script>
<script type="text/mustache" id="select-options">
  <option value="">Select {{object}}</option>
  {{#options}}
    <option value="{{id}}">{{name}}</option>
  {{/options}}
</script>
<script type="text/mustache" id="content-results">
  {{#pages}}
    <li>
      {{ title }}
      <em>
        visits: {{displayHits}}
        <span class="triangle">&#x25b2;</span>&nbsp;<span class="percent">{{percentageUp}}</span>
      </em>
    </li>
  {{/pages}}
</script>
<script type="text/mustache" id="inside-gov-posts">
  {{#posts}}
    <li>{{ title }}<em>{{type}} - <span title="{{published}}">{{published}}</span></em></li>
  {{/posts}}
</script>
<script type="text/mustache" id="tweets">
  {{#tweets}}
    <li class="tweet">
      <img src="{{img}}">
      <div class="text">
        <p class="user"><strong>{{from}}</strong> @{{handle}}</p>
        <p>{{text}} - <span title="{{posted}}">{{posted}}</span></p>
      </div>
    </li>
  {{/tweets}}
</script>
